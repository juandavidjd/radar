=== Master pipeline iniciado ===
[INFO] Base:  C:\RadarPremios\radar_premios.db
[INFO] Log:   C:\RadarPremios\logs\master_2025-08-14_075247.log.txt

[STEP] Scraper LOTERÃAS
[CMD ] python
[2025-08-14 07:52:48] === Inicio de scrapeo de loterías ===
[2025-08-14 07:52:49] [INFO] tolima: sin nuevos registros
[2025-08-14 07:52:49] [INFO] huila: sin nuevos registros
[2025-08-14 07:52:49] [INFO] manizales: sin nuevos registros
[2025-08-14 07:52:49] [INFO] quindio: sin nuevos registros
[2025-08-14 07:52:49] [INFO] medellin: sin nuevos registros
[2025-08-14 07:52:50] [INFO] boyaca: sin nuevos registros
[2025-08-14 07:52:50] ✅ Scrapeo completado
[OK  ] Scraper LOTERÃAS  RC=0

[STEP] Scraper ASTRO LUNA
[CMD ] python
[2025-08-14 07:52:50] === Inicio de scrapeo de AstroLuna ===
[2025-08-14 07:52:59] [INFO] AstroLuna: sin nuevos registros
[2025-08-14 07:52:59] ✅ Scrapeo completado
[OK  ] Scraper ASTRO LUNA  RC=0

[STEP] Scraper BALOTO premios
[CMD ] python
[2025-08-14 07:53:00] === Inicio de scrapeo de premios Baloto ===
[2025-08-14 07:53:00] ⏳ Sorteo 2540 -> https://baloto.com/resultados-baloto/2540
[2025-08-14 07:53:01] [REINTENTO 1] Error al acceder https://baloto.com/resultados-baloto/2540: 500 Server Error: Internal Server Error for url: https://baloto.com/resultados-baloto/2540
[2025-08-14 07:53:04] [REINTENTO 2] Error al acceder https://baloto.com/resultados-baloto/2540: 500 Server Error: Internal Server Error for url: https://baloto.com/resultados-baloto/2540
[2025-08-14 07:53:07] [REINTENTO 3] Error al acceder https://baloto.com/resultados-baloto/2540: 500 Server Error: Internal Server Error for url: https://baloto.com/resultados-baloto/2540
[2025-08-14 07:53:07] [ERROR] Fallo permanente al acceder a https://baloto.com/resultados-baloto/2540
[2025-08-14 07:53:07] [INFO] Sin nuevos registros para guardar.
[2025-08-14 07:53:07] ✅ Scrapeo completado
[OK  ] Scraper BALOTO premios  RC=0

[STEP] Scraper BALOTO resultados
[CMD ] python
[2025-08-14 07:53:08] === Inicio de scrapeo de Baloto ===
[2025-08-14 07:53:08] ⏳ Sorteo 2540 -> https://www.baloto.com/resultados-baloto/2540
[2025-08-14 07:53:09] [REINTENTO 1] Error al acceder https://www.baloto.com/resultados-baloto/2540: 500 Server Error: Internal Server Error for url: https://www.baloto.com/resultados-baloto/2540
[2025-08-14 07:53:12] [REINTENTO 2] Error al acceder https://www.baloto.com/resultados-baloto/2540: 500 Server Error: Internal Server Error for url: https://www.baloto.com/resultados-baloto/2540
[2025-08-14 07:53:15] [REINTENTO 3] Error al acceder https://www.baloto.com/resultados-baloto/2540: 500 Server Error: Internal Server Error for url: https://www.baloto.com/resultados-baloto/2540
[2025-08-14 07:53:15] [ERROR] Fallo permanente al acceder a https://www.baloto.com/resultados-baloto/2540
[2025-08-14 07:53:15] [INFO] Sin nuevos registros para guardar.
[2025-08-14 07:53:15] ✅ Scrapeo completado
[OK  ] Scraper BALOTO resultados  RC=0

[STEP] Scraper REVANCHA premios
[CMD ] python
[2025-08-14 07:53:16] === Inicio de scrapeo de premios Revancha ===
[2025-08-14 07:53:16] ⏳ Sorteo 2540 -> https://www.baloto.com/resultados-revancha/2540
[2025-08-14 07:53:17] [REINTENTO 1] Error al acceder https://www.baloto.com/resultados-revancha/2540: 500 Server Error: Internal Server Error for url: https://www.baloto.com/resultados-revancha/2540
[2025-08-14 07:53:20] [REINTENTO 2] Error al acceder https://www.baloto.com/resultados-revancha/2540: 500 Server Error: Internal Server Error for url: https://www.baloto.com/resultados-revancha/2540
[2025-08-14 07:53:23] [REINTENTO 3] Error al acceder https://www.baloto.com/resultados-revancha/2540: 500 Server Error: Internal Server Error for url: https://www.baloto.com/resultados-revancha/2540
[2025-08-14 07:53:23] [ERROR] Fallo permanente al acceder a https://www.baloto.com/resultados-revancha/2540
[2025-08-14 07:53:23] [INFO] Sin nuevos registros para guardar.
[2025-08-14 07:53:23] ✅ Scrapeo completado
[OK  ] Scraper REVANCHA premios  RC=0

[STEP] Scraper REVANCHA resultados
[CMD ] python
[2025-08-14 07:53:24] === Inicio de scrapeo de resultados Revancha ===
[2025-08-14 07:53:24] ⏳ Sorteo 2540 -> https://baloto.com/resultados-revancha/2540
[2025-08-14 07:53:25] [REINTENTO 1] Error al acceder https://baloto.com/resultados-revancha/2540: 500 Server Error: Internal Server Error for url: https://baloto.com/resultados-revancha/2540
[2025-08-14 07:53:28] [REINTENTO 2] Error al acceder https://baloto.com/resultados-revancha/2540: 500 Server Error: Internal Server Error for url: https://baloto.com/resultados-revancha/2540
[2025-08-14 07:53:31] [REINTENTO 3] Error al acceder https://baloto.com/resultados-revancha/2540: 500 Server Error: Internal Server Error for url: https://baloto.com/resultados-revancha/2540
[2025-08-14 07:53:31] [ERROR] Fallo permanente al acceder a https://baloto.com/resultados-revancha/2540
[2025-08-14 07:53:31] [INFO] Sin nuevos registros para guardar.
[2025-08-14 07:53:31] ✅ Scrapeo completado
[OK  ] Scraper REVANCHA resultados  RC=0

[STEP] LIMPIAR CSVs
[CMD ] python
[INFO] Origen no existe: C:\RadarPremios\data\crudos
[INFO] Nada que limpiar. Saliendo (RC=0).
[OK  ] LIMPIAR CSVs  RC=0

[STEP] CARGAR DB
[CMD ] python
📥 Cargando boyaca.csv → tabla boyaca
✅ Tabla boyaca cargada con 102 registros.
📥 Cargando huila.csv → tabla huila
✅ Tabla huila cargada con 101 registros.
📥 Cargando manizales.csv → tabla manizales
✅ Tabla manizales cargada con 101 registros.
📥 Cargando medellin.csv → tabla medellin
✅ Tabla medellin cargada con 101 registros.
📥 Cargando quindio.csv → tabla quindio
✅ Tabla quindio cargada con 101 registros.
📥 Cargando tolima.csv → tabla tolima
✅ Tabla tolima cargada con 102 registros.
📥 Cargando astro_luna.csv → tabla astro_luna
✅ Tabla astro_luna cargada con 5504 registros.
📥 Cargando baloto_resultados.csv → tabla baloto_resultados
✅ Tabla baloto_resultados cargada con 458 registros.
📥 Cargando baloto_premios.csv → tabla baloto_premios
✅ Tabla baloto_premios cargada con 3664 registros.
📥 Cargando revancha_resultados.csv → tabla revancha_resultados
✅ Tabla revancha_resultados cargada con 458 registros.
📥 Cargando revancha_premios.csv → tabla revancha_premios
✅ Tabla revancha_premios cargada con 3664 registros.
📥 Cargando matriz_astro_luna.csv → tabla matriz_astro_luna
✅ Tabla matriz_astro_luna cargada con 5504 registros.

🟢 Base de datos lista en: C:\RadarPremios\radar_premios.db
[OK  ] CARGAR DB  RC=0

[STEP] GENERAR MATRIZ ASTRO LUNA
[CMD ] python
✅ Matriz generada: C:\RadarPremios\data\limpio\matriz_astro_luna.csv
[OK  ] GENERAR MATRIZ ASTRO LUNA  RC=0

[STEP] CARGAR DB post-matriz
[CMD ] python
📥 Cargando boyaca.csv → tabla boyaca
✅ Tabla boyaca cargada con 102 registros.
📥 Cargando huila.csv → tabla huila
✅ Tabla huila cargada con 101 registros.
📥 Cargando manizales.csv → tabla manizales
✅ Tabla manizales cargada con 101 registros.
📥 Cargando medellin.csv → tabla medellin
✅ Tabla medellin cargada con 101 registros.
📥 Cargando quindio.csv → tabla quindio
✅ Tabla quindio cargada con 101 registros.
📥 Cargando tolima.csv → tabla tolima
✅ Tabla tolima cargada con 102 registros.
📥 Cargando astro_luna.csv → tabla astro_luna
✅ Tabla astro_luna cargada con 5504 registros.
📥 Cargando baloto_resultados.csv → tabla baloto_resultados
✅ Tabla baloto_resultados cargada con 458 registros.
📥 Cargando baloto_premios.csv → tabla baloto_premios
✅ Tabla baloto_premios cargada con 3664 registros.
📥 Cargando revancha_resultados.csv → tabla revancha_resultados
✅ Tabla revancha_resultados cargada con 458 registros.
📥 Cargando revancha_premios.csv → tabla revancha_premios
✅ Tabla revancha_premios cargada con 3664 registros.
📥 Cargando matriz_astro_luna.csv → tabla matriz_astro_luna
✅ Tabla matriz_astro_luna cargada con 5504 registros.

🟢 Base de datos lista en: C:\RadarPremios\radar_premios.db
[OK  ] CARGAR DB post-matriz  RC=0

[STEP] ACTUALIZAR_BASE_ASTROLUNA
[CMD ] python
[OK] Proceso finalizado.
[OK] Log escrito en: C:\RadarPremios\actualizar_base_astroluna_20250814_075334.log.txt
[OK  ] ACTUALIZAR_BASE_ASTROLUNA  RC=0

[STEP] MANTENIMIENTO DB
[CMD ] python
[INFO] db_maintenance.py — 2025-08-14 07:53:35
[INFO] Base: C:\RadarPremios\radar_premios.db
[INFO] Índices asegurados/planificados: 352
[OK] Vista 'todo' creada con INNER JOIN.
[OK] ANALYZE ejecutado.
[OK] VACUUM ejecutado.
[OK] Puesta a punto finalizada.
[OK  ] MANTENIMIENTO DB  RC=0

[STEP] SCORING CANDIDATOS
[CMD ] python
python.exe : C:\RadarPremios\score_candidates.py:5: SyntaxWarning: invalid escape sequence '\R'
En C:\RadarPremios\scripts\master_update_all.ps1: 198 Carácter: 5
+     & $PYTHON @cmdArgs
+     ~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (C:\RadarPremios...e sequence '\R':String) [], RemoteException
    + FullyQualifiedErrorId : NativeCommandError
 
  python score_candidates.py --db "C:\RadarPremios\radar_premios.db" --gen 100 --seed 12345 --top 15 --shortlist 5 ^
TOP 15
2035  score=0.770392  hotcold=0.588  cal=0.700  dp=0.167  exact=1.000  patt=+0.100
0153  score=0.759216  hotcold=0.574  cal=0.700  dp=0.129  exact=1.000  patt=+0.100
6025  score=0.748333  hotcold=0.500  cal=0.700  dp=0.167  exact=1.000  patt=+0.100
0385  score=0.747549  hotcold=0.574  cal=0.700  dp=0.071  exact=1.000  patt=+0.100
8057  score=0.738676  hotcold=0.515  cal=0.700  dp=0.100  exact=1.000  patt=+0.100
6752  score=0.737647  hotcold=0.471  cal=0.600  dp=0.250  exact=1.000  patt=+0.100
5602  score=0.736667  hotcold=0.500  cal=0.700  dp=0.108  exact=1.000  patt=+0.100
2571  score=0.734314  hotcold=0.471  cal=0.600  dp=0.233  exact=1.000  patt=+0.100
5304  score=0.728676  hotcold=0.515  cal=0.700  dp=0.050  exact=1.000  patt=+0.100
7105  score=0.728676  hotcold=0.515  cal=0.700  dp=0.050  exact=1.000  patt=+0.100
2930  score=0.726618  hotcold=0.426  cal=0.700  dp=0.150  exact=1.000  patt=+0.100
6358  score=0.726176  hotcold=0.515  cal=0.600  dp=0.138  exact=1.000  patt=+0.100
7093  score=0.724461  hotcold=0.441  cal=0.700  dp=0.121  exact=1.000  patt=+0.100
0056  score=0.722696  hotcold=0.544  cal=0.800  dp=0.133  exact=1.000  patt=+0.050
9063  score=0.719608  hotcold=0.412  cal=0.700  dp=0.133  exact=1.000  patt=+0.100
[OK] CSV → C:\RadarPremios\candidatos_scored.csv
[OK] CSV (todos) → C:\RadarPremios\candidatos_all.csv
[OK] HTML → C:\RadarPremios\candidatos_scored.html

================================================================
SHORTLIST FINAL (5 propuestas)
----------------------------------------------------------------
  1. 2035  score=0.770392  hotcold=0.588  cal=0.700  dp=0.167  exact=1.000  patt=+0.100
  2. 0153  score=0.759216  hotcold=0.574  cal=0.700  dp=0.129  exact=1.000  patt=+0.100
  3. 6025  score=0.748333  hotcold=0.500  cal=0.700  dp=0.167  exact=1.000  patt=+0.100
  4. 0385  score=0.747549  hotcold=0.574  cal=0.700  dp=0.071  exact=1.000  patt=+0.100
  5. 8057  score=0.738676  hotcold=0.515  cal=0.700  dp=0.100  exact=1.000  patt=+0.100
----------------------------------------------------------------
FOLIO DEL RUN
----------------------------------------------------------------
timestamp: 2025-08-14 07:53:35
db: C:\RadarPremios\radar_premios.db
gen: 100
seed: 12345
top: 15
shortlist: 5
w_hotcold: 0.25
w_cal: 0.2
w_dp: 0.2
w_exact: 0.35
cap_digitpos: 60
cap_exact: 180
export_top: C:\RadarPremios\candidatos_scored.csv
export_all: C:\RadarPremios\candidatos_all.csv
report_html: C:\RadarPremios\candidatos_scored.html
================================================================

[OK] Run guardado en DB con run_id=10
[OK  ] SCORING CANDIDATOS  RC=0

[STEP] EVALUAR RUN RECIENTE
[CMD ] python
python.exe : C:\RadarPremios\scripts\eval_last_run.py:6: SyntaxWarning: invalid escape sequence '\R'
En C:\RadarPremios\scripts\master_update_all.ps1: 205 Carácter: 5
+     & $PYTHON -X utf8 (Join-Path $SCRIPTS 'eval_last_run.py') --db $D ...
+     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (C:\RadarPremios...e sequence '\R':String) [], RemoteException
    + FullyQualifiedErrorId : NativeCommandError
 
  python eval_last_run.py --db "C:\RadarPremios\radar_premios.db"

==================== VEREDICTO (post-run) ====================
Fecha real más reciente: 2025-08-11
Número ganador:         4968
Run evaluado:           run_id=10  created_at=2025-08-14 12:53:35  seed=12345
Veredicto:              MISS ❌  (rank=—)
==============================================================

[OK  ] EVALUAR RUN RECIENTE  RC=0

=== Master pipeline FINALIZADO ===
[INFO] Log en: C:\RadarPremios\logs\master_2025-08-14_075247.log.txt
